\chapter{Challenges to Privacy and Security}
\label{chap:challenges}

As mentioned in Chapter~\ref{chap:intro}, the last 10+ years have
heralded the rapid expansion of a range of digital-data-related use
cases. In order to accommodate these use cases, most modern services
leverage some form of third-party compute or data storage
systems. These third-party systems, however, raise questions about the
privacy and security of user data. In particular, to what degree can
we trust various third-parties with user data? And as a corollary: are
there mechanisms that allow us to control or reduce this degree of
trust?

\section{Modern Use Cases}
\label{chap:challenges:usecases}

Before we can answer these questions, it's important to note that any
proposed solution that fails to support modern use cases is unlikely
to succeed in a market where users are voluntarily turning to
third-party services for the features they can provide. Thus, we must
start by understanding the predominant modern use-cases. We can divide
these cases into two categories: consumer focused use cases and
developer focused use-cases. Consumer use cases are those that matter
to the average lay computer user. Likewise, developer use cases are
those that matter to back-end developers and service providers.  Both
set of use cases represent requirements that modern security and
privacy enhancing solutions must be able to accommodate if they are to
be widely adopted and used.

\subsection{Consumer Use Cases}

Today's end-users expect modern software to support a range of common
behaviors. Chief amongst these are the ability to support the use of
multiple devices per user, the ability to support collaboration and
sharing with other users, and the ability to provide turn-key data
processing capabilities or other services which act on user data.

\subsubsection{Multi-Device}

It's not uncommon for a single user to utilize multiple computing
devices. For example, a user might have a personal laptop, a work
desktop, a smart phone, and a tablet. As such, users expect to be able
access their data from any of their devices. Similarly, many modern
users treat compute devices as disposable: when a user loses a phone
or has a laptop stolen, they still expect to be able to continue to
access their data on a replacement device. The multi-device and
ephemeral-device nature of the average consumer has lead to the rise
of a number of solutions that aim to separate a user's data from any
single device and to ensure that users may access their data
regardless of device. Such solutions can generally be placed into two
groups: services that sync user data between devices (i.e. sync
services) and services that store all user data in a centralized
location and provide a manner for users to access this date from each
device (i.e. locker services).

Sync services operate on the premise that user data will be stored
locally on each device, but will also be automatically kept in sync
across multiple devices. They ensure that the users has the same view
of their data regardless of device, even when each device stores
independent, localized copies of this data. Such services generally
accomplish this by providing either a centralized or a decentralized
service that tracks user data on each device and updates data across
all devices when it is added, removed, or modified on any single
device. Sync services are often a desirable solution to the
multi-device data access problem for several reasons:

\begin{packed_desc}
\item[Bandwidth Efficient:] Sync services only require Internet access
  to update data between devices. The act of reading data already
  present on a device accesses only the local copy, avoiding the need
  to consume bandwidth communicating with an external server. This is
  a desirable quality in situations where bandwidth would either be
  cost prohibitive or performance restricting to consume every time
  data needed to be read. Sync services also tend to be bandwidth
  efficient even when writing data since they can cache a series of
  updates locally and sync only the final differential state to other
  devices.
\item[Offline Support:] As an extension to the previous point, sync
  services are capable of operating in situations where no Internet or
  network connection is available. Since all data access is available
  locally, user may continue to access and modify data even when they
  can not connect to the sync service. The sync service will simply
  wait for the network connection to return and then update any local
  changes on other devices. While this can lead to issues when users
  make conflicting modifications on multiple devices while offline, in
  general it represents a more graceful failure model then a system
  that requires an Internet connection for any form of data
  access. This also acts as a hedge against a sync service provider
  shutting down: even if a sync service goes under, the user will
  still retain local copes of all their data that they could use to
  bootstrap a new sync service.
\item[No Central Storage:] Since sync services are only concerned with
  syncing changes between devices, it's not inherently necessary for
  such services to store a copy of user data in a central
  location. This allows such systems to be built using distributed
  device-to-device designs when desired. In practice, many sync
  systems do store a copy of all user data in order to facilitate the
  bootstrapping of new devices, but this is not an inherent
  requirement of the sync service architecture.
\end{packed_desc}

One of the main challenges to sync services is their local storage
requirement. While such a requirement allows for some of the benefits
listed above, it also limits the total available storage afforded to
each user to the size of their smallest device. Most sync services
offer selective-sync options to help mitigate such issues, but these
tend to be burdensome to configure and are often relegated to the
purview of advanced users. In situations where a user wishes to store
more data then can be fit on any single device, locker services may
offer a more desirable solution.

Locker service operate by storing all user data on a central server
and then providing mechanisms for users to access and modify this data
from remote devices. Such services are reminiscent of more traditional
networked file systems such as NFS~\cite{sandberg1985} or
SMB~\cite{microsoft-smb2}. Data locker services store all user data in
a logically-centralized and globally-accessible location where each
individual user device may access it for the propose of reading,
modifying, or deleting data. Since such systems only have one logical
copy of each file, the user is presented with a single view of their
data regardless of which device they chose to access it from. Such
services have several desirable qualities:

\begin{packed_desc}
\item[No Local Storage:] Locker services store all data in online
  locations, generally atop data-center-based servers. Thus, unlike
  sync services, they require no local storage. This is useful in
  situations where local storage is limited (e.g. on phones), but
  where the user still wishes to have access to a large amount of data
  (e.g. a video collection). Likewise, locker services avoid wasting
  unnecessary local space by creating multiple copies of each file on
  each device. Additionally, the lack of local copies may be desirable
  in situations where local devices are prone to theft or may
  otherwise not pose a reliable and secure platform for the storage of
  all user data.
\item[Single Source of Truth:] Locker services only store a single
  (logical) copy of the data at any time. This ensures that situations
  where the user makes conflicting modifications to a piece of data
  are far less likely then in sync-based solutions. This property can
  increase the usefulness of such systems in multi-user scenarios
  where more then one person might be accessing and modifying data
  simultaneously.
\item[Centralized Control:] Due to the manner in which most locker
  services store their data, such services often provide a more
  centralized control point then a potentially distributed sync
  service. Such control may be desirable in corporate environments
  where a single administrator wishes to track user file access,
  modifications, etc.
\end{packed_desc}

One of the main downsides to locker services is their requirement for
always-online access. Thus, in situations where network access is
impossible or where high-bandwidth usage is not practical, locker
services can prevent users from access their data. Thus, locker
services may operate best on local area networks and in other
situations where network bandwidth is reliable and plentifully. In
situations where network access is not guaranteed, sync services may
offer a more desirable solution.

Today, sync services tend to be the more popular solution for most
end-users. Such users generally want access to their data across
multiple devices and in multiple locations (home, work, public,
etc) -- requiring the data to be available in locations where a
reliable network is not always available. Thus, sync service dominate
multi-device data access solution landscape. Examples of popular
centralized sync services today include Dropbox~\cite{dropbox}
($\approx300$ Million Users~\cite{smith-stats}), Google
Drive~\cite{google-drive} ($\approx240$ Million
Users~\cite{smith-stats}), and Microsoft
OneDrive~\cite{microsoft-onedrive} ($\approx250$ Million
Users~\cite{smith-stats}).  An examples of a decentralized sync
service is BitTorrent Sync~\cite{bittorrent-sync} ($\approx2$ Million
Users~\cite{smith-stats}).

Locker services are also available and tend to be most popular in
situations where network access is reliable and where centralized
control is desirable: e.g. business environments. In such situations
traditional in-house networked file system solution may provide the
locker service. Alternatively, there are cloud services that provide
users with online locker-like data access: e.g. systems like
OwnCloud~\cite{owncloud} implement the WebDAV
protocol~\cite{goland1999} for remote file access over the
Internet. Similarly, distributed systems like Least Authority's Simple
Secure Storage Service~\cite{leastauthority-s4} (S4, built atop
Tahoe-LAFS~\cite{wilcox-o'hearn2008}) offer Internet-wide multi-device
access to a distributed data store. Furthermore, some sync services
are also capable of operating more like locker services. Systems like
Microsoft OneDrive allow users to specify which files are copied
locally (and thus available for offline access) and which are stored
only on the server and streamed to the user as
required~\cite{microsoft-onedrive-online}. There have also been a
number of popular special-purpose locker services designed to promote
multi-device access to specific classes of data. In the media space,
systems like Google Music~\cite{google-music} allow users to upload
music files which they can then access and stream to multiple
devices. Similarly, distributed systems like Popcorn
Time~\cite{popcorntime} allow users to (often illegally) tap into each
others video libraries to stream content to their own devices.

As shown above, users' ownership of multiple computing devices has
lead to a strong desire for users to be able to access their data from
any device. In response to this desire, a number of third-party backed
services have sprung up to provide users with multi-device file
access. Any technology aimed at enhancing the security or privacy of
end-user data is going to need to account for and support the
multi-device nature of modern users.

\subsubsection{Multi-User}

In addition to using multiple compute devices, many users today desire
the ability to share and collaborate with other users. In response to
these desires, many cloud services offer various mechanisms for
multi-user sharing and collaboration. Similar to the multi-device use
case, the solutions in this space can be roughly grouped into two
categories: distributed services that allows users to share copies of
data with other users and centralized services that allow multiple
users access to a central copy of the data.

In many cases the same solutions discussed previously that enable the
multi-device use case also provide multi-user sharing
capabilities. This is true of sync service like Dropbox or Drive that
not only allow users to sync files amongst their devices, but also
allow them to share files with other users. In many ways, this is just
an extension of the sync service model with the extension that now
users may also include devices other then their own in the sync
set. Similarly, locker-style multi-device solutions often
include support for multi-user use cases. For example, traditional
networked file systems like NFS provide both multi-device access and
multi-user support. Likewise, systems like Least Authority's S4
provide primitives for sharing files with multiple users.

Unlike the sync use case, however, adding support for multi-user
sharing requires providing access control primitives in addition to
basic file syncing primitives. These primitives allow users to control
the manner in which other users may access and use the shared
data. Such controls are necessary to allows users to place limits on
the degree to which they trust other users. Many services provide
fairly traditional file-like access control schemes were each user may
be granted read and/or write permissions to a specific piece of
data. Data owners can use these permission to craft access control
polices for the group of user with which they wish to share data.

It's also common to see support for various forms of multi-user
sharing in a range of hosted services, from social networking apps to
web-based document editors. Social network platforms like
Facebook~\cite{facebook} have extensive support for sharing photos,
videos, status messages, and other user-generated continent. Such
systems also provide the data originator with the ability to place
limits on how data is shared and who it is shared with (although the
effectiveness of such access control settings is often
questionable~\cite{johnson2012}). Similarly, systems like Google
Docs~\cite{google-docs} or Microsoft Office
Online~\cite{microsoft-officeonline} offer users the ability to
interactively compose and collaborate on document creation and
editing. Such systems are inherently multi-user, generally giving the
user the ability to chose who else can view and edit each document.

Multi-user use cases are a key component of many computing systems
today. As in the multi-device cases, support for multi-user scenarios
is an important component of any privacy and security enhancing
technology. Technologies that lock the user out of such use cases are
unlikely to be effective solutions for most users today.

\subsubsection{Hosted Services and Processing}

In addition to the multi-device and multi-user scenarios discussed
above, many user also expect support for various hosted services and
data processing solution. In many ways, this expectation follows from
users' multi-device and multi-user expectations: whereas the
traditional computing model involves users running locally installed
applications for the purpose of processing or interacting with data,
such a model fails to properly account for the multi-device and
multi-user requirements of many modern applications. Thus, data
processing services that would have traditionally been installed
locally, are now run as hosted services atop third party
infrastructure. Using such services requires users to be able to share
data with third parties for the purpose of leveraging such
services. Unlike pure multi-device syncing or multi-user sharing
services, data processing service provide some benefit to the user
above and beyond the mere storage, transfer, or sharing of data.

Examples of popular hosted services that interact with user-generated
data include the social networking and document editing solutions
mentioned previously. In both cases, these services take user data and
leverage it to provide an additional benefit to the user: e.g. the
ability to interact and communicate with one's friends or the ability
to create and expand written documents with a colleague. Other
examples of hosted services include various ``Big Data'' systems that
leverage vast swaths of user data to provide insights into user
behavior or patterns in user actions. For example, ``Internet of
Things'' (IoT) devices that enable a user to track things like their
day-to-day power consumption~\cite{neurio} or record their exercise
habits~\cite{fitbit} are becoming increasingly popular. The data from
such devices in generally passed back to third party processing
platforms where useful insights are drawn from it and returned to the
user. Often such systems leverage their access to data from a
multitude of users to return more useful information then the data
from any single user could provide. It seems likely that such services
will continue to increase in popularity as the cost of deploying IoT
devices drops and the collective benefits of access to large data sets
grows.

Modern privacy and security enhancing technologies must account for
the fact that many users may wish to leverage hosted third party data
processing services. Such technologies should provide users with the
ability to share data with data processing services in a controlled
manner and to transparently audit the manner in which such services
are using the shared data. Failure to support such scenarios will
negate the benefits for any privacy and security enhancing technology
across many current and future use cases.

\subsection{Developer Use Cases}

Beyond end-user use cases, developers are also heavy users of modern
third party cloud services. As such, there are a number of backend use
cases that would also benefit from privacy and security enhancements
with respect to third party trust. Giving developers the tools to
better protect cloud-backed systems allows them to build more secure
end-user services. Furthermore, developers are often some of the
heaviest users of cloud services, so ensuring that they can adequately
protect their data and services hosted atop third party infrastructure
significantly expands the total number of computing systems
protected. I discuss several common back-end use cases here.

\subsubsection{IaaS and PaaS Infrastructure}

Many production-level systems deployed today run atop third-party
cloud IaaS (Infrastructure as a Service) and PaaS (Platform as a
Service) systems. This fact leads to two main consequences that must
be considered when designing security or privacy enhancing
technologies: lack of full-stack control and the need to scale
dynamically.

Traditional security and privacy enhancing technologies often rely on
full control of the entire deployment stack, from the raw hardware all
the way through the user-facing software, in order to guarantee any
level of security. In a world where most developers rely on IaaS and
PaaS systems for production deployment, such full stack control is
generally not possible. The less trust a developer must place in their
IaaS or PaaS systems and providers, the more direct control they
retain over the security and privacy of their applications. Modern
security and privacy enhancing technology systems should be capable of
operating securely even when the underlying hardware or platform lies
outside of the developer's full control.

Additionally, cloud-based deployments are often scaled up and down
dynamically as load requires. An application that begins running atop
a single virtual machine may need to scale up to 10s or 100s of
virtual machines as the load increases. Modern cloud platforms are
designed to support such scaling. Thus, any privacy or security
enhancing systems designed to protect such systems must also be
capable of rapid and dynamic scalability. Failure to support such
dynamics will make it difficult for developers to adapt a given
security and privacy enhancing technology in an IaaS/PaaS based world.

\subsubsection{Remote, Headless, and Automated}

It is not uncommon for developers to be working atop remote
infrastructure when utilizing PaaS and IaaS systems. As such, security
and privacy enhancing technologies should not make assumptions about a
user's ability to physically access a machine. Such physical access is
sometimes required by security enhancing technologies for the purpose
of bootstrapping various encryption systems using SmartCards, USB
drives, etc. Unfortunately the remote, cloud-based nature of many
modern systems do not allow for such physical-access dependent
mechanisms.

Similarly, most IaaS-backed servers or PaaS-backed services are
expected to autonomously operate headlessly (i.e. without a human
operator present) for long stretches of time. Thus, it is not
appropriate to expect developers to be able to provide interactive
keyboard input in support of a security or privacy enhancing
technology. For example, most existing full-disk encryption systems
require a user to enter a pre-boot password each time the system
starts in order to bootstrap the encryption system. Such systems are
not easy to operate in a modern cloud-backed environment and thus are
of limited usefulness in such scenarios.

Furthermore, the trend toward headless, ephemeral infrastructure
capable of rapidly scaling up or down is driving the adoption of
configuration management systems such as Puppet~\cite{puppet} or
Chef~\cite{chef}. Such systems are necessary to help developers
automate the otherwise monotonous process of configuring cloud compute
resources manually. Indeed, the sheer number of cloud servers involved
in most larger scale production deployments makes manual management
impossible.~\footnote{This fact has given rise to the sentiment that
  ``servers are cattle, not pets'' -- meaning developers should focus
  on automatically managing large numbers of systems instead of
  carefully curating individual systems.}  Thus, new security and
privacy enhancing technologies must be able to operate securely even
when their configuration must be automated.

Assumptions about a developer's ability to physically access a
machine, to interactively provide input to a machine, or to manually
deploy each machine no longer hold under the current practice of using
automated, ephemeral cloud-backed infrastructure. As such. it's
important that any developer-targeted privacy or security enhancing
technology avoids making such assumptions, ensuring that it can
operate effectively even atop modern deployment practices.

\section{Threats to Security and Privacy}
\label{chap:challenges:threats}

The current cloud-computing and third-party solution trends raise a
number of security and privacy related questions. To what degree must
we trust each service provider to protect our data? How good our
service providers at protecting data? What other threats do modern
usage models expose?

Almost all of the use cases discussed in
\S~\ref{chap:challenges:usecases} involve ceding some degree of trust
to one or more third parties. This often comes in the form of storing
data or executing computations on third-party servers. But to what
degree is this trust well placed? How likely is such trust to lead to
an unintended disclosure or manipulation of private data or a related
security failure? Chapter~\ref{chap:trust} discusses these concepts in
more detail. Here I'll present examples of some of the security
failures that can occur related to third party trust.

\subsection{Misuse of Data}

One of the main forms of trust we place in third parties is not to
intentionally misuse the data we store with them. E.g. Are third
parties using our data in unexpected and undesirable ways?
Unfortunately, there are a number of examples of such breaches
occurring:

\begin{packed_desc}
\item[Facebook Emotional Contagion Study:] In 2014, it came to light
  that Facebook had engaged in research that involved manipulating
  what users saw in their news feeds in order to study the effects of
  one user's emotions on other users~\cite{goel2014}. The study was
  performed on $\approx700$ users without their explicit knowledge or
  consent. Facebook misused the trust placed in it by its users by
  leveraging and manipulating their data in unforeseen ways.
\item[Uber User Travel History:] In 2014, ride-share app Uber made
  headlines when it used the travel-history of a number of its more
  prominent users to display a live user-location map at a launch
  party~\cite{sims2014}. Similarly, the company also used stored user
  travel history to compose a blog post detailing its ability to
  detect a given user's proclivity for ``one night
  stands''~\cite{pagliery2014}. In both cases, Uber leveraged data it
  had about users in manners users did not approve of or intend.
\item[Target Pregnancy Prediction:] In 2012, it became public that
  Target had developed a statistical system for predicting if its
  shoppers were pregnant based on the kind of items they
  bought. Target would then leverage this data to send customers
  coupons optimized for pregnant individuals. In one case, this
  practice even lead to the outing of a pregnant teenager to her
  previously unaware father~\cite{hill2012}. Clearly such outcomes are
  not within the realm of what most shoppers expect when purchasing
  items at Target.
\end{packed_desc}

While not all of these examples are directly related to a user's use
of cloud services (or fixable through the use of the SSaaS privacy and
security enhancing mechanisms proposed in this document), they do show
a range of examples of how third parties can violate the trust placed
in them by their users.

\subsection{Data Breaches}

Beyond direct third party misuse of user data, there is also the risk
of unintentional leaks of data stored with third parties. This may
occur due to a direct attack on third party or through a mistake or
oversight on the part of the third party. Thus, even if we trust that
a third party won't intentionally misuse our data, we must still
question whether or not they are capable of providing adequate
protection for our data. Today we are generally reliant on third
parties to protect the data they store and to faithfully enforce any
access control or sharing restrictions we specify.

Unfortunately, there are many examples of third party data breaches
resulting in the unintended release of user data. 2014 alone saw the
release of almost 350 million user identities and associated data
online, representing over 10\% of internet users
globally~\cite{symanteccorporation2015}. While not intentional, such
breaches still call into question the degree to which we should trust
third parties with our data. Examples include:

\begin{packed_desc}
\item[Apple iCloud Celebrity Photo Leak:] In 2014, a number of
  celebrity users of Apple's iCloud data storage
  service~\cite{apple-icloud} were subject to a public release of
  personal photos they had stored with the service, often in various
  stats on undress. This leak was the result of a targeted attack on
  the corresponding users' passwords and iCloud
  accounts~\cite{apple-icloudleak}. These attacks appear to have been
  propagated over several months prior to the public release. While
  this leak was not a result of an overt flaw in Apple's iCloud
  system, the weak default security requirements for iCloud accounts
  made it relatively simple for attackers to compromise such accounts
  and steal data.
\item[Office of Personnel Management Breach:] In 2015, The US Office
  of Personnel Management (OPM) announced that their systems had been
  breached, exposing the personal data of pretty much anyone who has
  held or currently holds a US Government security
  clearance~\cite{ars-opmhack, opm-cybersecurityincidents}. This
  breach, in addition to having high strategic value to foreign
  attackers, reveled sensitive personnel data of a huge number of US
  government employees and contractors. This leak was largely due to
  the use of old and outdated storage and security system employed by
  the OPM.
\item[Anthem and Premera Blue Cross Breaches:] In early 2015 two major
  US health insurance companies were subject to attacks that breached
  their user records, allowing the release of personal, financial, and
  medical information on millions of users~\cite{krebs-anthem,
    krebs-premera}. While the details of the breaches are not yet
  public, such attacks demonstrate the risk of trusting a third party
  with the storage of large quantities of sensitive data.
\item[Heartbleed, Shellshock, Etc:] In addition to targeted attacks,
  third parties are also susceptible to software failures. Prominent
  examples of such failures include Heartbleed~\cite{heartbleed}, a
  flaw in OpenSSL~\cite{openssl} that allowed attackers to steal
  private data from many secure servers, and
  Shellshock~\cite{symantec-shellshock}, a GNU bash~\cite{gnu-bash}
  flaw that allowed user to execute arbitrary code on many web
  servers. Both flaws were widespread and effected large swaths of
  web-connected sites and services, potentially exposing many users to
  attacks and data breaches.
\end{packed_desc}

Thus, even if we trust the underlying third party provider to properly
store and utilize our data, in many cases the data may still be at
risk for exposure through attack or oversight.

\subsection{Government Intrusion}

Recent events have revealed yet another threat vector that must be
considered when leveraging third-party cloud services: the targeting
of such services by various governments for the propose of wide-spread
surveillance. In particular, the NSA leaks revealed by Mr. Edward
Snowden demonstrate the US government's widespread data surveillance
programs targeting popular cloud data
providers~\cite{greenwald-prism}.  Outside the Unites States,
government-compelled surveillance and user data access are equally, of
not more, pervasive~\cite{netfreedom2015}.  While such
actions, at least in the US, raise numerous questions of
constitutional legality under the 4th
Amendment~\cite{us-constitution-amend4}, that does not at present
change the fact that such searches are known to be occurring. Thus, we
are forced to not only consider our trust of the various third party
providers in the cloud, but also our trust of the governments of the
jurisdictions in which such providers operate.

Numerous examples of privacy-subverting attacks by government actors
have come to light over the previous 5 years. It's worth considering
several of these examples as we evaluate how to increase the security
and privacy guarantees available atop third-party services. Notable
instances of government data introspection include:

\begin{packed_desc}
\item[PRISM and MUSCULAR:] The NSA PRISM program was/is a
  FISC-approved~\cite{fisc} system for compelling service providers to
  provide user data to the government~\cite{greenwald-prism}. It is
  believed to be one of the largest mechanisms for the government
  extraction of user data from various cloud-based services
  (e.g. Google, Yahoo, Microsoft, etc). Similarly, MUSCULAR was/is a
  joint NSA and British GCHQ effort to intercept and monitor traffic
  within Google's and Yahoo's data center to data center
  networks~\cite{gellman-muscular}. Prior to MUSCULAR's disclosure,
  this intra-datacenter traffic was not generally encrypted, and thus
  was an ideal point for another entity to intercept and monitor user
  data. Both cases demonstrate a concerted government effort to access
  and monitor user data atop popular cloud services.
\item[Lavabit:] Lavabit was a private email service with 400,000+
  users premised on the idea that poplar free email services such as
  Gmail lacked adequate security and privacy guarantees (in part due
  to the lesser legal protections such communications receive under
  the US Third-party doctrine~\cite{scotus-usvmiller-privacy,
    scotus-smithvmaryland}). In August 2013 Lavabit shuttered its
  service in response to a US government subpoena requiring Lavabit to
  turn over all of its encrypted user traffic as well as the
  associated SSL encryption keys necessary to decrypt
  it~\cite{lavabit, levsion-lavabit}. After a legal fight, Lavabit
  founder Ladar Levison was forced to disclose the encryption keys
  protecting his service. The Lavabit example shows the government's
  willingness to compel service operators to aid in the monitoring and
  collection of user data.
\item[Apple v. FBI:] In response to the 2015 San Bernardino shootings,
  the FBI is seeking to compel Apple to help it decrypt the shooter's
  iPhone~\cite{ars-cookvfbi}. The form of encryption Apple uses to
  protect the iPhone involves the use of a hardware-linked encryption
  key that can not be extracted from the phone. Furthermore, this key
  can not be used on the phone without a user-provided passcode. By
  default, Apple limits the number of guesses a user may make at this
  passcode and throttles the speed at which a user may guess
  passcodes. The FBI wishes to compel Apple to update the software on
  the iPhone in question so that they may try to guess an unlimited
  number of passcodes at a high rate of speed\footnote{Due to Apple's
    use of signature-verified code, it is not possible for the FBI (or
    anyone else) to update the Apple's software themselves - instead
    Apple (or the holder of Apple's cryptographic code signing key)
    must approve and sign any updated code before the iPhone will run
    it.}\cite{eff-applecrypto}. Apple has declined to honor this
  request~\cite{apple-fbiletter}. The case is currently being fought
  in the courts. As in the Lavabit case, this case demonstrates
  government willingness and interest in compelling companies to
  assist them in accessing private user data, even going so far as to
  potentially require companies to avoid the use of certain forms of
  encryption or security-enhancing features that would make such
  assistance difficult or impossible to provide.
\item[The Great Firewall:] Moving beyond US-based government digital
  surveillance, China has long been known to employ one of the most
  sophisticated web monitoring and content control systems in
  existence~\cite{rsf-china}. The so called ``Great Firewall''
  effectively monitors all Internet traffic traveling in and out of
  China, blocking a range of encrypted services that might be capable
  of subverting such monitoring. Such systems show the willingness of
  some governments to outlaw certain types of technology in order to
  ensure government surveillance efforts are not subverted or
  hindered.
\end{packed_desc}

These examples demonstrate the willingness of governments to ensure
they can access and monitor user data in the cloud. When designing
security and privacy enhancing systems, we must account for the fact
that services providers may find themselves in positions where they
are compelled to turn over data (or even collude in its collection) or
where they face large scale surveillance of all internal and external
network traffic.

\subsection{Physical Security}

The modern usage practices discussed in
\S\ref{chap:challenges:usecases} introduce security issues beyond just
those related to the trust and exploitation of third-party
services. One of the key areas where such issues manifest is in the
physical security of modern computing devices. Traditionally the
security of a computing device or any data stored there was rooted on
the premise that the device itself could be kept physically secure:
e.g. an attacker would not posses unrestricted physical access to a
device. Modern usage patterns break this assumption in several ways.

First, the multi-device nature of most users increases the number of
computing devices potentially storing copies of sensitive user
data. This results in an increased physical attack
surface. Furthermore, many modern compute devices are designed to be
mobile -- easily carried by the user and moved about. The combination
of these facts greatly increase the likelihood of a computing device
storing user data being lost or stolen. As such, it's critical that we
design systems that are resilient to data compromise even when they
fall into the hands of unauthorized actors. The likelihood of user
data compromises occurring due to device loss or theft is far higher
today then ever before, and privacy enhancing solutions must account
for this fact.

As mentioned previously, physical control over IaaS-based services is
also not generally possible. We are thus forced to run many of our
modern services atop hardware under another party's control. This lack
of physical hardware access has repercussions for modern threat
models. To what extent can the hardware provider interfere with or
bypass the security of software that runs on their systems? What
abilities do they have to introspect data stored on their servers? How
much can we trust computations performed on such systems?  Thus,
modern security and privacy enhancing systems must be designed with
the knowledge that the underlying hardware itself may be
untrustworthy. This is a significant departure from the more
traditional physically-secure-hardware threat model.

Both these cases demonstrate that any security and privacy enhancing
systems designed to protect data in either the cloud or atop modern
user devices must contend with the fact that the physical security of
the devices on which they operate is not guaranteed. We must design
such systems with the trustworthiness (or lack there of) of such
systems in mind.

\section{Need for New Solutions}
\label{chap:challenges:solutions}

The confluence of modern use cases and modern security concerns place
restrictions on the manner in which we must design and build
successful privacy and security enhancing systems. These security
concerns form the basis for the threat model against which our systems
must be able to defend. The need to support modern use cases place
limitations on the manners in which we may defend against these
threats. These limitations disqualify many existing security solutions
and underline the need for new approaches.

Traditionally the solution to many of the threats discussed in
\S~\ref{chap:challenges:threats} involve the use of
encryption. Encryption is a desirable security primitive since it
allows us to protect user data in a manner that is mathematically
secure: e.g. encryption does not rely on any system or authority for
the enforcement of its security guarantees, it is instead the
intrinsic properties of the underlying math itself that give rise to
its security claims. Thus encryption and related cryptographic
primitives (e.g. authentication, etc) can serve as the basis for
systems that are designed to operate securely atop untrusted hardware
or services.

A number of existing encryption systems have been designed and
deployed with an aim towards protecting user data in the scenarios
discussed previously. For example, full-disk encryption systems such
as dm-crypt/LUKS~\cite{dm-crypt, luks} protect user data at rest and
can help guard against data leaks if a storage device is lost, stolen,
or otherwise acquired by an adversary. Unfortunately, such systems
fail to account for many modern use cases. In particular, full disk
encryption systems generally require the user to interactively supply
a pass phrase at boot time in order to bootstrap the decryption of the
data on the system. Such requirements are not generally possible to
fulfill when using cloud-based infrastructure such as IaaS-backed
virtual machines. Simply doing away with such pass-phrases isn't a
viable solution either since the security of the entire system rests
upon the intended user, and only that user, being able to provide such
information. I.e. a full disk encryption system that stores a copy of
the user pass-phrase locally to avoid the need for the user to type it
in is no more secure then a system without encryption at all. You're
either giving an adversary a unlocked box or you're giving an
adversary a locked box as well as the key required to unlock it;
neither scenario results in a security benefit for the owner of the
box.

There also exist various run-time encryption systems that avoid many
of the issues associated with using full disk encryption systems in
the cloud. In particular, file-level encryption systems like
eCryptfs~\cite{ecryptfs} could conceivably be used to locally encrypt
user data before uploading it to a cloud service such as Dropbox or
Apple's iCloud. Such an action would serve to greatly reduce the
degree to which the user must trust either Dropbox or
Apple. Unfortunately such actions do not mesh well with many of the
desired multi-device and multi-user use cases mentioned
previously. For example, encrypting data on one's laptop, storing it
on Dropbox, and then trying to access it from another device such as a
phone or tablet will fail. This is due to the fact that the keys used
to encrypt the data, and that are thus required to decrypt and access
the data, only exist on the original laptop, making it impossible to
access the data from another device -- the very propose behind putting
it on Dropbox in the first place. The user could manually move their
keys between devices to overcome this issue, but doing so likely
presents an unachievable challenge for most lay users. Furthermore, if
the user is capable of easily transferring keys between devices via
machines other then Dropbox, why can't they just do that with files as
well and avoid Dropbox all together? Likewise, if a user wishes to
share data with another iCloud or Dropbox user, they are now also
required to exchange the necessary decryption key information
out-of-band in addition to enabling the normal sharing
mechanisms. Such exchanges are challenging for most users to perform
in a practical and secure manner, and requiring them greatly increases
the overhead to multi-user sharing, making it unlikely that most users
would employ such tactics in the first place.

Thus, I assert that most traditional encryption systems are not good
fits for the poplar third-party backed use cases today. Fortunately,
in these situations it is not the cryptography itself that is
flawed. This is fortunate: modern state-of-the-art crypto is quite a
powerful tool and it would be a major loss to be unable to leverage it
in pursuit of privacy and security enhancing systems. Cryptography is
a viable tool for helping us reduce the trust we must place in various
third parties.

Instead, the issue breaking common use cases today is the lack of
secure, usable, and flexible key management systems. Such systems
would work in conjunction with traditional encryption solution to
allow users to deploy encryption systems while also ensuring that they
have access to the associated keys when and where they need
them. Likewise, such systems would be tasked with controlling access
to such keys to ensure only authorized devices and users may leverage
them to decrypt user data. In fact, encryption key storage represents
just a subset of the larger secret storage problem: How can a a user
securely store various secrets (encryption keys, passwords, personal
data, etc) in a manner that allows them to access them when and where
they desire while also ensuring that no unauthorized access to these
secrets is allowed?\footnote{This question is merely a variant of the
  Always/Never paradox often encountered when attempting to build
  secure systems. The problem was probably most famously encountered
  during the Cold War in the design of nuclear weapons: How can you
  ensure a nuclear weapon always detonates when its use is
  intentional, but never detonates when its use is
  not?~\cite{schlosser2013}} And once securely stored, how can a user
use these secrets to bootstrap modern security and privacy enhancing
solution in a manner that support a range of desirable use cases?
These questions and my proposed solutions form the basis of the work
presented in this thesis.

%%  LocalWords:  OneDrive IoT SMB OwnCloud WebDAV LAFS IaaS PaaS Uber
%%  LocalWords:  iCloud Premera Heartbleed Shellshock OpenSSL NSA OPM
%%  LocalWords:  Snowden th FISC GCHQ MUSCULAR's Lavabit Ladar SSaaS
%%  LocalWords:  Levison Bernardino passcode passcodes dm
